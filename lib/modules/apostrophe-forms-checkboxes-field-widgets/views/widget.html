{# ids must be unique doc-wide #}
{% set id = apos.utils.generateId() %}
{% set widget = data.widget %}
<fieldset class="{% if widget.classPrefix %}{{widget.classPrefix}}__fieldset{% else %}apos-forms-fieldset{% endif %}">
  <legend % if widget.classPrefix %}class="{{widget.classPrefix}}__legend"{% endif %}>{{ widget.fieldLabel}}</legend>
  {% if not widget.required %} {{ __("(Optional)") }}{% endif %}
  {% for choice in widget.choices %}
    {% set choiceId = id + apos.utils.slugify(choice.value) %}
    <input {% if widget.classPrefix %}class="{{widget.classPrefix}}__input"{% endif %} type="checkbox" id="{{ choiceId }}" name="{{ widget.fieldName}}" value="{{ choice.value }}">
    <label {% if widget.classPrefix %}class="{{widget.classPrefix}}__label"{% endif %} for="{{ choiceId }}">{{ choice.label }}</label>
  {% endfor %}
  <p data-apos-input-message="{{ widget.fieldName}}" hidden></p>
</fieldset>
